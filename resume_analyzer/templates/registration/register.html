{% extends "base.html" %}
{% load static %}

{% block content %}
<style>
    .auth-panel { width: 100%; max-width: 420px; padding: 0 20px; }

    .auth-header { text-align: center; margin-bottom: 28px; }
    .auth-header h2 {
        font-family: 'Plus Jakarta Sans', sans-serif;
        font-size: 28px; font-weight: 800; letter-spacing: -0.5px; color: #f0f4ff;
    }
    .auth-header p {
        font-family: 'Inter', sans-serif;
        font-size: 14px; color: rgba(240,244,255,0.45); margin-top: 6px;
    }

    .auth-card {
        background: var(--surface); border: 1px solid var(--border);
        border-radius: 18px; padding: 32px 28px;
        position: relative; overflow: hidden;
    }
    .auth-card::before {
        content: ''; position: absolute; top: 0; left: 15%; right: 15%; height: 1px;
        background: linear-gradient(90deg, transparent, var(--accent), transparent);
    }

    .field-group { margin-bottom: 18px; }

    .field-label {
        display: block; font-family: 'Inter', sans-serif;
        font-size: 11px; font-weight: 600; letter-spacing: 0.8px;
        text-transform: uppercase; color: rgba(240,244,255,0.45); margin-bottom: 7px;
    }

    .input-wrap { position: relative; }

    .auth-card input[type="text"],
    .auth-card input[type="password"] {
        width: 100%; padding: 12px 42px 12px 14px; border-radius: 9px;
        border: 1px solid rgba(255,255,255,0.1);
        background: rgba(255,255,255,0.05);
        color: #f0f4ff; -webkit-text-fill-color: #f0f4ff;
        caret-color: var(--accent);
        font-family: 'Inter', sans-serif; font-size: 15px;
        outline: none; transition: all 0.2s; -webkit-appearance: none;
    }
    .auth-card input:focus {
        border-color: rgba(79,255,176,0.4);
        box-shadow: 0 0 0 3px rgba(79,255,176,0.08);
        background: rgba(79,255,176,0.03);
    }
    .auth-card input::placeholder {
        color: rgba(240,244,255,0.2); -webkit-text-fill-color: rgba(240,244,255,0.2);
    }

    .eye-btn {
        position: absolute; right: 12px; top: 50%; transform: translateY(-50%);
        background: none; border: none; cursor: pointer; padding: 0;
        color: rgba(240,244,255,0.3); transition: color 0.2s;
        display: flex; align-items: center; justify-content: center;
    }
    .eye-btn:hover { color: var(--accent); }

    .error-text { font-family: 'Inter', sans-serif; font-size: 12px; color: #ff4d6d; margin-top: 5px; }

    .auth-submit {
        width: 100%; padding: 13px; border-radius: 10px;
        background: var(--accent); border: none; color: #080c14;
        font-family: 'Plus Jakarta Sans', sans-serif; font-size: 15px; font-weight: 800;
        cursor: pointer; transition: all 0.2s; margin-top: 6px;
    }
    .auth-submit:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(79,255,176,0.3); }

    .auth-footer {
        font-family: 'Inter', sans-serif; text-align: center;
        margin-top: 20px; font-size: 14px; color: rgba(240,244,255,0.45);
    }
    .auth-footer a { color: var(--accent); text-decoration: none; font-weight: 500; }
    .auth-footer a:hover { text-decoration: underline; }
</style>

<div class="auth-panel">
    <div class="auth-header">
        <h2>Create account</h2>
        <p>Join JobFit and start landing interviews</p>
    </div>
    <div class="auth-card">
        <form method="POST">
            {% csrf_token %}
            <div class="field-group">
                <label class="field-label">Username</label>
                <div class="input-wrap">{{ form.username }}</div>
                {% if form.username.errors %}<div class="error-text">{{ form.username.errors }}</div>{% endif %}
            </div>
            <div class="field-group">
                <label class="field-label">Password</label>
                <div class="input-wrap">
                    {{ form.password1 }}
                    <button type="button" class="eye-btn" onclick="togglePassword(this)" aria-label="Toggle password">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                    </button>
                </div>
                {% if form.password1.errors %}<div class="error-text">{{ form.password1.errors }}</div>{% endif %}
            </div>
            <div class="field-group">
                <label class="field-label">Confirm Password</label>
                <div class="input-wrap">
                    {{ form.password2 }}
                    <button type="button" class="eye-btn" onclick="togglePassword(this)" aria-label="Toggle confirm password">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                    </button>
                </div>
                {% if form.password2.errors %}<div class="error-text">{{ form.password2.errors }}</div>{% endif %}
            </div>
            <button type="submit" class="auth-submit">Create Account</button>
        </form>
    </div>
    <div class="auth-footer">
        Already have an account? <a href="{% url 'login' %}">Sign in</a>
    </div>
</div>

<script>
function togglePassword(btn) {
    const input = btn.previousElementSibling;
    const icon = btn.querySelector('svg');
    const isHidden = input.type === 'password';
    input.type = isHidden ? 'text' : 'password';
    icon.innerHTML = isHidden
        ? `<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"/><path d="M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19"/><line x1="1" y1="1" x2="23" y2="23"/>`
        : `<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/>`;
    btn.style.color = isHidden ? 'var(--accent)' : 'rgba(240,244,255,0.3)';
}
</script>
{% endblock %}
